<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js navy">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Quick Start - KubeSerial</title>
        <!-- Custom HTML head -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-MF2CTP3H1C"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-MF2CTP3H1C');
</script>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "navy";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('navy')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="intro.html"><strong aria-hidden="true">1.</strong> Intro</a></li><li class="chapter-item expanded "><a href="quick_start.html" class="active"><strong aria-hidden="true">2.</strong> Quick Start</a></li><li class="chapter-item expanded "><a href="configuration/SUMMARY.html"><strong aria-hidden="true">3.</strong> Configuration</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="configuration/kubeserial.html"><strong aria-hidden="true">3.1.</strong> KubeSerial</a></li><li class="chapter-item expanded "><a href="configuration/devices.html"><strong aria-hidden="true">3.2.</strong> Devices</a></li><li class="chapter-item expanded "><a href="configuration/managers/SUMMARY.html"><strong aria-hidden="true">3.3.</strong> Managers</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="configuration/managers/internal.html"><strong aria-hidden="true">3.3.1.</strong> Manager scheduled by KubeSerial</a></li><li class="chapter-item expanded "><a href="configuration/managers/external.html"><strong aria-hidden="true">3.3.2.</strong> Managed externaly</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="components/SUMMARY.html"><strong aria-hidden="true">4.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="components/controllers.html"><strong aria-hidden="true">4.1.</strong> Controllers</a></li><li class="chapter-item expanded "><a href="components/monitor.html"><strong aria-hidden="true">4.2.</strong> Device Monitor</a></li><li class="chapter-item expanded "><a href="components/gateway.html"><strong aria-hidden="true">4.3.</strong> Device Gateway</a></li><li class="chapter-item expanded "><a href="components/manager.html"><strong aria-hidden="true">4.4.</strong> Manager</a></li></ol></li><li class="chapter-item expanded "><a href="development.html"><strong aria-hidden="true">5.</strong> Development</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">KubeSerial</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/janekbaraniewski/kubeserial" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="quick-start"><a class="header" href="#quick-start">Quick Start</a></h1>
<ul>
<li><a href="#requirements">Requirements</a></li>
<li><a href="#install-with-helm">Install with Helm</a>
<ul>
<li><a href="#add-help-repo">Add help repo</a></li>
<li><a href="#install-crds">Install CRDs</a></li>
<li><a href="#create-minimal-values-file">Create minimal values file</a></li>
<li><a href="#install-controller">Install Controller</a></li>
</ul>
</li>
<li><a href="#get-device-attributes">Get device attributes</a></li>
<li><a href="#update-helm-values-file">Update helm values file</a></li>
<li><a href="#update-your-helm-release-with-new-values">Update your helm release with new values</a></li>
<li><a href="#validate-that-everything-is-working">Validate that everything is working</a></li>
</ul>
<h2 id="requirements"><a class="header" href="#requirements">Requirements</a></h2>
<ul>
<li>k8s cluster</li>
<li>CertManager installed and Cert Issuer configured</li>
</ul>
<h2 id="install-with-helm"><a class="header" href="#install-with-helm">Install with Helm</a></h2>
<h3 id="add-help-repo"><a class="header" href="#add-help-repo">Add help repo</a></h3>
<p>First you'll need to add helm repository that stores KubeSerial charts</p>
<pre><code class="language-bash">&gt; helm repo add baraniewski https://baraniewski.com/charts/
</code></pre>
<h3 id="install-crds"><a class="header" href="#install-crds">Install CRDs</a></h3>
<p>Due to way in which helm handles CRDs, they are managed using separate chart.</p>
<pre><code class="language-bash">&gt; helm upgrade --install kubeserial-crds baraniewski/kubeserial-crds
</code></pre>
<h3 id="create-minimal-values-file"><a class="header" href="#create-minimal-values-file">Create minimal values file</a></h3>
<p>In order to make webhook work, you'll need to specify which Cert Issuer should be used for SSL cert used by webhook. To do this, create values file with following structure (change values depending on your setup):</p>
<pre><code class="language-yaml">certManagerIssuer:
  name: selfsigned-issuer
  kind: ClusterIssuer
</code></pre>
<p><mark>Set proper name and kind of your Issuer or ClusterIssuer</mark></p>
<h3 id="install-controller"><a class="header" href="#install-controller">Install Controller</a></h3>
<pre><code class="language-bash">&gt; helm upgrade --install kubeserial baraniewski/kubeserial
</code></pre>
<h2 id="get-device-attributes"><a class="header" href="#get-device-attributes">Get device attributes</a></h2>
<p>To find out values of <code>idVendor</code> and <code>idProduct</code> for your device, connect it to your computer, locate where it is (let's say <code>/dev/ttyUSB0</code>) and run:</p>
<pre><code class="language-bash">&gt; udevadm info -q all -n /dev/ttyUSB0 --attribute-walk
</code></pre>
<p>Look for them from the top.</p>
<h2 id="update-helm-values-file"><a class="header" href="#update-helm-values-file">Update helm values file</a></h2>
<p>Now you're ready to create configuration for your devices. Here you can find example of 2 devices - one is using predefined manager, one doesn't. To learn about the difference, please refer to <a href="configuration/managers/SUMMARY.html">manager configuration docs</a></p>
<p>Add this config to your values file:</p>
<pre><code class="language-yaml">kubeserial:
  serialDevices:
  - idProduct: &quot;6001&quot;
    idVendor: &quot;0403&quot;
    manager: octoprint
    name: ender3
  - idProduct: ea60
    idVendor: 10c4
    name: sonoff-zigbee
</code></pre>
<h2 id="update-your-helm-release-with-new-values"><a class="header" href="#update-your-helm-release-with-new-values">Update your helm release with new values</a></h2>
<pre><code class="language-bash">&gt; helm upgrade kubeserial baraniewski/kubeserial -f my-values.yaml
</code></pre>
<h2 id="validate-that-everything-is-working"><a class="header" href="#validate-that-everything-is-working">Validate that everything is working</a></h2>
<p>You should see 3 workloads in your cluster - controler manager, device injector webhook and device monitor:</p>
<pre><code class="language-bash">$ ➜  kubectl get pods
NAME                                         READY   STATUS    RESTARTS   AGE
kubeserial-7d58555d4c-97nqk                  1/1     Running   0          5m
kubeserial-device-injector-cc7696b59-mfdn5   1/1     Running   0          5m
kubeserial-monitor-rjs82                     2/2     Running   0          5m
</code></pre>
<p>Number of <code>kubeserial-monitor</code> pods should match number of your cluster nodes.</p>
<p>You should also see your devices:</p>
<pre><code class="language-bash">$ ➜  kubectl get serialdevice
NAME            READY   AVAILABLE   NODE
ender3          True    False
sonoff-zigbee   True    False
</code></pre>
<p>You're all set with basic configuration of KubeSerial. Please read through rest of docs to configure it to your needs.</p>
<footer id="open-on-gh">Found a bug? <a href="https://github.com/janekbaraniewski/kubeserial/edit/main/docs/src/quick_start.md">Edit this file on GitHub.</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="intro.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                            <a rel="next" href="configuration/SUMMARY.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="intro.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                    <a rel="next" href="configuration/SUMMARY.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>

        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        <script type="text/javascript" src="mermaid.min.js"></script>
        <script type="text/javascript" src="mermaid-init.js"></script>
    </body>
</html>
